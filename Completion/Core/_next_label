#autoload

local gopt=-J descr spec

if [[ "$1" = -([12]|)[VJ] ]]; then
  gopt="$1"
  shift
fi

if comptags -A "$1" curtag spec; then
  _comp_tags="$_comp_tags $spec "
  if [[ "$curtag" = *:* ]]; then
    zformat -f descr "${curtag#*:}" "d:$3"
    _description "$gopt" "${curtag%:*}" "$2" "$descr"
    curtag="${curtag%:*}"
    set -A $2 "${(P@)2}" "${(@)argv[4,-1]}"
  else
    _description "$gopt" "$curtag" "$2" "$3"
    set -A $2 "${(@)argv[4,-1]}" "${(P@)2}"
  fi

  return 0
fi

return 1
